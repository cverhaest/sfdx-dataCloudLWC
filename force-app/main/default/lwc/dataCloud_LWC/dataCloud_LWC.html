<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-standard-coaching" title="description of icon when needed">
                        <lightning-icon icon-name="standard:data_model" size="small" alternative-text="Data Cloud"></lightning-icon>
                    </span>
                </div>
                <div class="slds-media__body">
                    <h2>
                        <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="[object Object]">
                            <span class="slds-text-heading_small">{title} ({rowCount})</span>
                        </a>
                    </h2>
                </div>
                <div>
                    <lightning-button-icon icon-name="utility:refresh" variant="border-filled" onclick={handleRefresh} alternative-text="Refresh"></lightning-button-icon>
                </div>
            </header>
        </div>
        <div class="slds-card__body">
            <template lwc:if={bDisplayTable}>
                <table class="slds-table slds-table_fixed-layout slds-table_bordered slds-no-row-hover slds-table_cell-buffer" key={oData}>
                    <template for:each={lData} for:item="oData" for:index="index">
                        <template lwc:if={index}>
                        </template>
                        <template lwc:else>    
                            <thead key={oData}>
                                <tr class="slds-text-title_caps">
                                    <template for:each={oData} for:item="oRow">
                                        <th scope="col" key={oRow.name}><div class="slds-truncate" title={oRow.name}>{oRow.name}</div></th>
                                    </template>
                                </tr>
                            </thead>
                        </template>
                        <tbody key={oData}>
                            <tr class="slds-hint-parent">
                                <template for:each={oData} for:item="oRow">
                                    <td key={oRow.name}><div class="slds-truncate">{oRow.value}</div></td>
                                </template>
                            </tr>
                            <!--
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">ssot__Salutation__c</div></th>
                                <td><div class="slds-truncate">{ssot__Salutation__c}</div></td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">ssot__FirstName__c</div></th>
                                <td><div class="slds-truncate">{ssot__FirstName__c}</div></td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">ssot__LastName__c</div></th>
                                <td><div class="slds-truncate">{ssot__LastName__c}</div></td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">ssot__Id__c</div></th>
                                <td><div class="slds-truncate">{ssot__Id__c}</div></td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">MDMId__c</div></th>
                                <td><div class="slds-truncate">{MDMId__c}</div></td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <th scope="row"><div class="slds-truncate">ssot__BirthDate__c</div></th>
                                <td><div class="slds-truncate">{ssot__BirthDate__c}</div></td>
                            </tr>
                            -->
                        </tbody>
                    </template>    
                </table>
            </template>
            <template lwc:else>
                <template for:each={lData} for:item="oData">
                    <table class="slds-table slds-table_fixed-layout slds-table_bordered slds-no-row-hover slds-table_cell-buffer" key={oData}>
                        <thead key={oData}>
                            <tr class="slds-text-title_caps">
                                <th scope="col"><div class="slds-truncate" title="Field Name">Field Name</div></th>
                                <th scope="col"><div class="slds-truncate" title="Value">Value</div></th>
                            </tr>
                        </thead>
                        <tbody key={oData}>
                            <template for:each={oData} for:item="oRow" >
                                <tr class="slds-hint-parent" key={oRow.name}>
                                    <th scope="row"><div class="slds-truncate">{oRow.name}</div></th>
                                    <td><div class="slds-truncate">{oRow.value}</div></td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                    <br key={oData}/>
                </template>
            </template>
        </div>
    </article>  

    <!-- DEBUG
    <p>{ssot__PersonName__c}</p>
    -->

    <!-- DEBUG
    <template for:each={lData} for:item="oData" >
        <template for:each={oData} for:item="oRow" >
            <p key={oRow.name}>{oRow.name} - {oRow.value}</p>
        </template>
    </template> -->
</template>